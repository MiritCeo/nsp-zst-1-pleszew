import{o as i,e as c,F as y,f as w,h as M,g as _,d as t,z as q,r as J,A as Q,b as m,a as h,u as e,H as X,c as D,k,B as ee,n as P,i as te,K as se,M as oe}from"./app.b53879ed.js";import{U as le}from"./UserLayout.2bbc437d.js";import{a as re,_ as B}from"./PrimaryButton.27dfc493.js";import{_ as Y}from"./InputError.78c0204c.js";/* empty css                                                */import{s as ae}from"./inputnumber.esm.05772400.js";import{s as E}from"./calendar.esm.12e8c0b5.js";import{s as L,a as ie,c as ne,b as de}from"./chip.esm.b5f11390.js";import{s as me}from"./toast.esm.607cb02c.js";import{h as r}from"./moment.9709ab41.js";import{_ as I}from"./Checkbox.b661dfd5.js";import"./inputtext.esm.b0b1c258.js";import"./button.esm.3c05891c.js";import"./portal.esm.e4d18dea.js";const ce={class:"tooltiptext"},ue=t("br",null,null,-1),T={__name:"Tooltip",props:{content:Array},setup(u){return(n,j)=>(i(),c("span",ce,[(i(!0),c(y,null,w(u.content[0].entries,(f,b)=>(i(),c("span",{key:b},[M(_(f.project.name)+" ("+_(f.working_hours)+")",1),ue,M(" "+_(f.project.name)+" ("+_(f.work_type.name)+") ",1)]))),128))]))}};const g=u=>(se("data-v-a5e3a6e0"),u=u(),oe(),u),pe=["onSubmit"],_e={class:"flex justify-end font-semibold"},fe={class:"mb-4 grid grid-cols-1 gap-3 flex-wrap md:grid-cols-3"},Ye={class:"flex flex-col"},be=g(()=>t("label",{class:"mb-2 font-semibold"},"Dzie\u0144",-1)),ge={class:"flex flex-col"},De=g(()=>t("label",{class:"mb-2 font-semibold"},"Pocz\u0105tek",-1)),ke={class:"flex flex-col"},ye=g(()=>t("label",{class:"mb-2 font-semibold"},"Koniec",-1)),he={class:"mb-4 grid grid-cols-1 gap-3 md:grid-cols-3"},we={class:"flex flex-col"},Me=g(()=>t("label",{class:"mb-2 font-semibold"},"Projekt",-1)),ve={class:"flex flex-col"},je=g(()=>t("label",{class:"mb-2 font-semibold"},"Rodzaj pracy",-1)),xe={class:"flex flex-col"},ze=g(()=>t("label",{class:"mb-2 font-semibold w-min-0"},"Ilo\u015B\u0107 godzin",-1)),Ve={class:"grid col-span-3"},$e=g(()=>t("label",{for:"end",class:"mb-2 font-semibold"},"Opis",-1)),Ce=["onClick"],Ue={class:"flex justify-center ml-4 mb-3 items-center md:justify-end"},Se=g(()=>t("label",{for:"remember"},"Ustaw jako domy\u015Blne",-1)),Fe={class:"flex justify-center flex-wrap md:justify-between"},We={class:"mb-2 w-full md:w-auto"},He=M(" Dodaj czynno\u015B\u0107 "),Pe={class:"mb-2 w-full md:w-auto"},Be=M(" Zapisz szkic "),Ee={class:"w-full md:w-auto"},Te=M(" Zapisz formularz "),Ae={class:"max-w-7xl mx-auto bg-white p-8 rounded-xl shadow shadow-slate-300"},Le={class:"text-center mb-4 text-lg"},Ie={class:"table-responsive"},Ne={class:"table border text-center mb-2"},Oe={class:"text-muted"},Ke=["onClick"],Re=["onClick"],Ze={class:"text-center mb-4 text-lg"},Ge={class:"table-responsive"},qe={class:"table border text-center mb-2"},Je={class:"text-muted"},Qe=["onClick"],Xe=["onClick"],et={class:"text-center mb-4 text-lg"},tt={class:"table-responsive"},st={class:"table border text-center mb-2"},ot={class:"text-muted"},lt=["onClick"],rt=["onClick"],at={__name:"Welcome",props:{work_types:Array,projects:Array,timestamps:Array,last_loged:Object,remember_last_project:Boolean,holiday_left:Number,timestamp_draft:Array},setup(u){const n=u;let j=new Date,f=new Date;f.setHours(8,0);let b=new Date;b.setHours(16,0);const v=q();let x=null,z=null,V=8,$=null;const N=J(!1),C=new Date;let U=0;C.setDate(C.getDate()+60),r.updateLocale("pl",{months:["Stycze\u0144","Luty","Marzec","Kwiecie\u0144","Maj","Czerwiec","Lipiec","Sierpie\u0144","Wrzesie\u0144","Pa\u017Adziernik","Listopad","Grudzie\u0144"]});function S(l,a){let s=[];for(;l;){let d=null;a==1?d=r().add(-1,"M").date(l):a==2?d=r().add(1,"M").date(l):d=r().date(l),s.push(d.format("MM-DD-YYYY")),l--}return s.reverse()}n.timestamp_draft!==null?(j=new Date(n.timestamp_draft.day),f=new Date(n.timestamp_draft.start_time),f.getHours(),b=new Date(n.timestamp_draft.end_time),b.getHours(),V=n.timestamp_draft.entries_draft[0].working_hours,x=n.timestamp_draft.entries_draft[0].description,z=n.timestamp_draft.entries_draft[0].work_type.id,$=n.timestamp_draft.entries_draft[0].project.id,U=n.remember_last_project):n.remember_last_project==1&&(f=new Date(n.last_loged.start_time),f.getHours(),b=new Date(n.last_loged.end_time),b.getHours(),V=n.last_loged.entries[0].working_hours,x=n.last_loged.entries[0].description,z=n.last_loged.entries[0].work_type.id,$=n.last_loged.entries[0].project.id,U=n.remember_last_project);const o=Q({day:j,start_time:f,end_time:b,remember_last_project:U,fields:[{work_type:z,project:$,working_hours:V,description:x}]});function F(l){let a=[],s=[6,0];const d=n.timestamps[r(l,"MM/DD/YYYY").format("YYYY-MM-DD")];return s.includes(r(l,"MM/DD/YYYY").weekday())?d===void 0?a.push("bg-gray-400"):a.push("bg-green-600"):d===void 0?a.push("bg-red-600"):a.push("bg-green-600"),a}function O(l){return l+1}if(n.timestamp_draft!==null){const l=n.timestamp_draft.entries_draft;A(l)}else if(n.remember_last_project===1){const l=n.last_loged.entries;A(l)}function A(l){l.forEach((a,s)=>{s!=0&&o.fields.push({work_type:a.work_type.id,project:a.project.id,working_hours:a.working_hours,description:a.description})})}function K(){o.fields.push({work_type:null,project:null,working_hours:null,description:null})}function R(l){o.fields.length>1&&o.fields.splice(l,1)}const Z=()=>{o.post(route("save.timebox",r(o.day,"DD-MM-YYYY").format("DD-MM-YYYY")),{onStart:()=>{o.clearErrors()},onSuccess:()=>{v.add({severity:"success",summary:"Powodzenie",detail:"Formularz zapisany",life:3e3})},onError:l=>{o.setError("day",l.day),v.add({severity:"error",summary:"B\u0142\u0105d",detail:"Wyst\u0105pi\u0142 b\u0142\u0105d podczas zapisu formularza",life:3e3})}})},G=()=>{o.post(route("save.timebox_draft",r(o.day,"DD-MM-YYYY").format("DD-MM-YYYY")),{onStart:()=>{o.clearErrors()},onSuccess:()=>{v.add({severity:"success",summary:"Powodzenie",detail:"Szkic zapisany",life:3e3})},onError:l=>{o.setError("day",l.day),v.add({severity:"error",summary:"B\u0142\u0105d",detail:"Wyst\u0105pi\u0142 b\u0142\u0105d podczas zapisu",life:3e3})}})};function W(l){o.day=r(l,"MM-DD-YYYY").format("DD-MM-YYYY")}function H(l){te.Inertia.get(route("edit.timebox",r(l,"MM-DD-YYYY").format("DD-MM-YYYY")))}return(l,a)=>(i(),c(y,null,[m(le,null,{default:h(()=>[m(e(me)),m(e(X),{title:"Welcome"}),t("form",{onSubmit:ee(Z,["prevent"])},[t("div",_e,"Ilo\u015B\u0107 urlop\xF3w do wykorzystania: "+_(n.holiday_left),1),m(Y,{message:l.$page.props.flash.message,class:"mb-2"},null,8,["message"]),t("div",fe,[t("div",Ye,[be,m(e(E),{modelValue:e(o).day,"onUpdate:modelValue":a[0]||(a[0]=s=>e(o).day=s),showTime:!1,maxDate:e(C),dateFormat:"dd-mm-yy"},null,8,["modelValue","maxDate"]),m(Y,{class:"mt-2",message:e(o).errors.day},null,8,["message"])]),t("div",ge,[De,m(e(E),{modelValue:e(o).start_time,"onUpdate:modelValue":a[1]||(a[1]=s=>e(o).start_time=s),stepMinute:15,showTime:!0,timeOnly:!0,maxDate:e(o).end_time},null,8,["modelValue","maxDate"]),m(Y,{class:"mt-2",message:e(o).errors.start_time},null,8,["message"])]),t("div",ke,[ye,m(e(E),{modelValue:e(o).end_time,"onUpdate:modelValue":a[2]||(a[2]=s=>e(o).end_time=s),stepMinute:15,showTime:!0,timeOnly:!0,minDate:e(o).start_time},null,8,["modelValue","minDate"]),m(Y,{class:"mt-2",message:e(o).errors.end_time},null,8,["message"])])]),(i(!0),c(y,null,w(e(o).fields,(s,d)=>(i(),c("div",{key:d},[t("div",he,[t("div",we,[Me,m(e(L),{modelValue:s.project,"onUpdate:modelValue":p=>s.project=p,options:u.projects,optionValue:"id",optionLabel:"name",placeholder:"Wybierz projekt",filter:!0,filterPlaceholder:"Szukaj projektu",showClear:!0},null,8,["modelValue","onUpdate:modelValue","options"]),e(o).errors?(i(),D(Y,{key:0,class:"mt-2",message:e(o).errors[`fields.${d}.project`]},null,8,["message"])):k("",!0)]),t("div",ve,[je,m(e(L),{modelValue:s.work_type,"onUpdate:modelValue":p=>s.work_type=p,options:u.work_types,optionValue:"id",optionLabel:"name",placeholder:"Wybierz tryb pracy",filter:!0,filterPlaceholder:"Szukaj trybu pracy",showClear:!0},null,8,["modelValue","onUpdate:modelValue","options"]),e(o).errors?(i(),D(Y,{key:0,class:"mt-2",message:e(o).errors[`fields.${d}.work_type`]},null,8,["message"])):k("",!0)]),t("div",xe,[ze,m(e(ae),{modelValue:s.working_hours,"onUpdate:modelValue":p=>s.working_hours=p,maxFractionDigits:2,showButtons:"",step:.25,placeholder:"Wpisz ilo\u015B\u0107 godzin w projekcie"},null,8,["modelValue","onUpdate:modelValue","step"]),e(o).errors?(i(),D(Y,{key:0,class:"mt-2",message:e(o).errors[`fields.${d}.working_hours`]},null,8,["message"])):k("",!0),N.value?(i(),D(Y,{key:1,class:"mt-2",message:"Wyst\u0105pi\u0142 b\u0142\u0105d, przelicz ponownie godziny"})):k("",!0)])]),t("div",Ve,[$e,m(e(ie),{modelValue:s.description,"onUpdate:modelValue":p=>s.description=p,autoResize:!0,maxlength:"255",rows:"1",placeholder:"Dodaj opcjonalny opis czynno\u015Bci w projekcie"},null,8,["modelValue","onUpdate:modelValue"]),e(o).errors?(i(),D(Y,{key:0,class:"mt-2",message:e(o).errors[`fields.${d}.description`]},null,8,["message"])):k("",!0),d!=0?(i(),c("i",{key:1,class:"pi pi-trash cursor-pointer mt-4 mb-0 mx-auto",style:{"font-size":"2rem",color:"#e60000"},onClick:p=>R(d)},null,8,Ce)):k("",!0)]),m(e(ne),{class:"mb-4 grid col-span-3",align:"center",type:"solid"},{default:h(()=>[m(e(de),{label:"Projekt "+O(d),class:"custom-chip"},null,8,["label"])]),_:2},1024)]))),128)),t("div",Ue,[Se,l.$props.remember_last_project==!0?(i(),D(I,{key:0,modelValue:e(o).remember_last_project,"onUpdate:modelValue":a[3]||(a[3]=s=>e(o).remember_last_project=s),"true-value":1,"false-value":0,name:"remember",id:"remember",checked:1},null,8,["modelValue"])):(i(),D(I,{key:1,modelValue:e(o).remember_last_project,"onUpdate:modelValue":a[4]||(a[4]=s=>e(o).remember_last_project=s),"true-value":1,"false-value":0,name:"remember",id:"remember"},null,8,["modelValue"]))]),t("div",Fe,[t("div",We,[m(B,{class:"w-full",type:"button",onClick:a[5]||(a[5]=s=>K())},{default:h(()=>[He]),_:1})]),t("div",Pe,[m(B,{type:"button",class:"w-full bg-green-500 hover:bg-green-400 active:bg-green-500 focus:border-green-400",onClick:G,disabled:e(o).processing},{default:h(()=>[Be]),_:1},8,["disabled"])]),t("div",Ee,[m(B,{class:"w-full",disabled:e(o).processing},{default:h(()=>[Te]),_:1},8,["disabled"])])])],40,pe)]),_:1}),t("div",Ae,[t("p",Le,[t("strong",null,_(e(r)().add(1,"M").format("MMMM YYYY")),1)]),t("div",Ie,[t("table",Ne,[t("tbody",null,[t("tr",Oe,[(i(!0),c(y,null,w(S(e(r)().add(1,"M").daysInMonth(),2),(s,d)=>(i(),c("td",{class:P(["tooltip text-dark min-w-[32px] border text-white",F(s)]),key:d},[u.timestamps[e(r)(s,"MM/DD/YYYY").format("YYYY-MM-DD")]?(i(),c("button",{key:0,onClick:p=>H(s)},[t("div",null,[m(T,{class:"hidden md:block",content:u.timestamps[e(r)(s,"MM/DD/YYYY").format("YYYY-MM-DD")]},null,8,["content"])]),t("span",null,_(e(r)(s,"MM/DD/YYYY").format("DD")),1)],8,Ke)):(i(),c("button",{key:1,onClick:p=>W(s)},[t("span",null,_(e(r)(s,"MM/DD/YYYY").format("DD")),1)],8,Re))],2))),128))])])])]),t("p",Ze,[t("strong",null,_(e(r)().format("MMMM YYYY")),1)]),t("div",Ge,[t("table",qe,[t("tbody",null,[t("tr",Je,[(i(!0),c(y,null,w(S(e(r)().daysInMonth(),!1),(s,d)=>(i(),c("td",{class:P(["tooltip text-dark min-w-[32px] border text-white",F(s)]),key:d},[u.timestamps[e(r)(s,"MM/DD/YYYY").format("YYYY-MM-DD")]?(i(),c("button",{key:0,onClick:p=>H(s)},[t("div",null,[m(T,{class:"hidden md:block",content:u.timestamps[e(r)(s,"MM/DD/YYYY").format("YYYY-MM-DD")]},null,8,["content"])]),t("span",null,_(e(r)(s,"MM/DD/YYYY").format("DD")),1)],8,Qe)):(i(),c("button",{key:1,onClick:p=>W(s)},[t("span",null,_(e(r)(s,"MM/DD/YYYY").format("DD")),1)],8,Xe))],2))),128))])])])]),t("p",et,[t("strong",null,_(e(r)().add(-1,"M").format("MMMM YYYY")),1)]),t("div",tt,[t("table",st,[t("tbody",null,[t("tr",ot,[(i(!0),c(y,null,w(S(e(r)().add(-1,"M").daysInMonth(),1),(s,d)=>(i(),c("td",{class:P(["tooltip text-dark border min-w-[32px] text-white",F(s)]),key:d},[u.timestamps[e(r)(s,"MM/DD/YYYY").format("YYYY-MM-DD")]?(i(),c("button",{key:0,onClick:p=>H(s)},[t("div",null,[m(T,{class:"hidden md:block",content:u.timestamps[e(r)(s,"MM/DD/YYYY").format("YYYY-MM-DD")]},null,8,["content"])]),t("span",null,_(e(r)(s,"MM/DD/YYYY").format("DD")),1)],8,lt)):(i(),c("button",{key:1,onClick:p=>W(s)},[t("span",null,_(e(r)(s,"MM/DD/YYYY").format("DD")),1)],8,rt))],2))),128))])])])])])],64))}},yt=re(at,[["__scopeId","data-v-a5e3a6e0"]]);export{yt as default};
