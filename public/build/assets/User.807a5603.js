import{t as j,r as x,w as T,l as D,o as a,c as F,a as m,d as e,b as h,u as r,g as l,m as f,e as d,f as G,h as c,n as P,L as K,F as S,i as y,K as B,M as N}from"./app.b53879ed.js";import{_ as Y}from"./AdminLayout.ea59584d.js";import{s as $}from"./button.esm.3c05891c.js";import{s as L}from"./inputtext.esm.b0b1c258.js";import{s as M}from"./calendar.esm.12e8c0b5.js";import{h as W}from"./moment.9709ab41.js";import{a as A}from"./PrimaryButton.27dfc493.js";import"./ApplicationLogo.66d006a1.js";import"./portal.esm.e4d18dea.js";const z=i=>(B("data-v-b6597a98"),i=i(),N(),i),Z={class:"mt-14 flex flex-row",style:{"background-color":"rgb(184 184 184)"}},H=["href"],O=["href"],R={class:"max-w-7xl mx-auto mb-14 bg-white p-8 rounded-xl"},q=z(()=>e("h1",{class:"flex justify-center mb-2 font-bold text-lg"}," Podsumowanie firmy ",-1)),J={class:"flex justify-between mb-2"},Q={class:"font-semibold text-base text-blue-700"},X={class:"flex justify-center mb-2 font-bold text-base"},ee={class:"mr-10"},te={class:"mr-10"},oe={class:"block w-full overflow-x-auto"},se={class:"items-center bg-transparent w-full border-collapse"},ae={class:"px-6 bg-blue-50 text-blue-500 align-middle border border-solid border-blue-100 py-3 border-l-0 border-r-0 whitespace-nowrap font-semibold text-left"},re=c(" Imi\u0119 i Nazwisko "),le={class:"pi pi-info-circle"},ie=z(()=>e("th",{class:"px-6 bg-blue-50 text-blue-500 align-middle border border-solid border-blue-100 py-3 border-l-0 border-r-0 whitespace-nowrap font-semibold text-left"}," Ilo\u015B\u0107 Godzin ",-1)),de={class:"px-6 bg-blue-50 text-blue-500 align-middle border border-solid border-blue-100 py-3 border-l-0 border-r-0 whitespace-nowrap font-semibold text-left"},ne=c(" Koszt Ca\u0142kowity "),ce={class:"pi pi-info-circle"},ue={class:"px-6 bg-blue-50 text-blue-500 align-middle border border-solid border-blue-100 py-3 border-l-0 border-r-0 whitespace-nowrap font-semibold text-left w-56"},he=c(" Zarobek firmy "),_e={class:"pi pi-info-circle"},pe={class:"border-t-0 px-6 align-middle border-l-0 border-r-0 whitespace-nowrap p-4"},be={class:"border-t-0 px-6 align-middle border-l-0 border-r-0 whitespace-nowrap p-4"},me={key:0,class:"border-t-0 px-6 align-middle border-l-0 border-r-0 whitespace-nowrap p-4"},fe=["href"],ye={key:1,class:"border-t-0 px-6 align-middle border-l-0 border-r-0 whitespace-nowrap p-4"},we=["href"],ke={key:2,class:"border-t-0 px-6 align-middle border-l-0 border-r-0 whitespace-nowrap p-4"},ge=["href"],ve={key:3,class:"border-t-0 px-6 align-middle border-l-0 border-r-0 whitespace-nowrap p-4"},xe=["href"],ze=c(" Ustaw Tutaj "),Ve={__name:"User",props:{users:Object,dateValue:String,searchValue:String},setup(i){const u=i,w=j(u,"dateValue"),_=x(w.value),n=x(w.value);let k=0,g=0,v=0;T(n,async(t,s)=>{y.Inertia.get(route("admin.summary.user"),{date:n.value,search:u.searchValue})});async function V(t){y.Inertia.get(route("admin.summary.user"),{search:t.target.value,date:n.value})}const C=()=>{n.value=W(_.value).format("YYYY-MM")};u.users.forEach(t=>{k+=t.hours,t.worker_costs!==null&&t.holidays.length!==0&&(g+=t.worker_costs.total_cost,v+=p(t))});function p(t){let s=0;return t.worker_costs!==null&&t.holidays.length!==0&&(s=t.hours*t.worker_costs.hourly_wage*((100-t.worker_costs.tax)/100)-t.worker_costs.total_cost-t.holidays[0].max_holiday*8*(t.worker_costs.total_cost/168)/12),s}function E(t){y.Inertia.get(route("admin.user.excelCreate",t),{date:n.value})}function I(t){let s=[];return p(t)<0&&s.push("text-red-600"),s}return(t,s)=>{const b=D("tooltip");return a(),F(Y,null,{default:m(()=>[e("div",Z,[e("a",{href:t.route("admin.summary.user"),class:"ml-14 p-3 bg-white w-32 text-center rounded-tl-lg disabled",as:"button",method:"GET"}," U\u017Cytkownicy ",8,H),e("a",{href:t.route("admin.summary.project"),class:"p-3 bg-gray-200 w-32 text-center rounded-tr-lg hover:bg-gray-300",as:"button",method:"GET"}," Projekty ",8,O)]),e("div",R,[q,e("div",J,[e("h3",Q,[h(r(L),{type:"text",autofocus:"",value:u.searchValue,placeholder:"Wyszukaj u\u017Cytkownika",onChange:V},null,8,["value"])]),h(r(M),{modelValue:_.value,"onUpdate:modelValue":s[0]||(s[0]=o=>_.value=o),"date-select":C(),view:"month",dateFormat:"yy-mm",placeholder:"Wybierz Dat\u0119"},null,8,["modelValue","date-select"])]),e("div",X,[e("div",ee," Ilo\u015B\u0107 godzin razem: "+l(r(k)),1),e("div",te," Koszt ca\u0142kowity razem: "+l(r(g).toFixed(2)),1),e("div",null," \u0141\u0105czny zysk firmy: "+l(r(v).toFixed(2)),1)]),e("div",oe,[e("table",se,[e("thead",null,[e("tr",null,[e("th",ae,[re,f(e("div",le,null,512),[[b,{value:"Po klikni\u0119ciu imienia oraz nazwiska u\u017Cytkownika, przechodzimy na stron\u0119 raportu danego u\u017Cytkownika",class:"custom-tooltip"},void 0,{right:!0}]])]),ie,e("th",de,[ne,f(e("div",ce,null,512),[[b,{value:"Po klikni\u0119ciu Kosztu Ca\u0142kowitego przy u\u017Cytkowniku, przechodzimy na stron\u0119 Karty Pracownika danego u\u017Cytkownika",class:"custom-tooltip"},void 0,{right:!0}]])]),e("th",ue,[he,f(e("div",_e,null,512),[[b,{value:"Po klikni\u0119ciu Zarobku Firmy przy u\u017Cytkowniku, przechodzimy na stron\u0119 Karty Pracownika danego u\u017Cytkownika",class:"custom-tooltip"},void 0,{right:!0}]])])])]),e("tbody",null,[(a(!0),d(S,null,G(i.users,(o,U)=>(a(),d("tr",{key:U},[e("td",pe,[h(r(K),{onClick:Ce=>E(o),class:P(I(o))},{default:m(()=>[c(l(o.name),1)]),_:2},1032,["onClick","class"])]),e("td",be,l(o.hours),1),o.worker_costs!==null&&o.holidays.length!==0?(a(),d("td",me,[e("a",{href:t.route("admin.user.cost",o),as:"button",method:"GET"},l(o.worker_costs.total_cost),9,fe)])):(a(),d("td",ye,[e("a",{href:t.route("admin.user.cost",o),as:"button",method:"GET"}," Brak Danych ",8,we)])),o.worker_costs!==null&&o.holidays.length!==0?(a(),d("td",ke,[e("a",{href:t.route("admin.user.cost",o),as:"button",method:"GET"},l(p(o).toFixed(2)),9,ge)])):(a(),d("td",ve,[e("a",{href:t.route("admin.user.cost",o),as:"button",method:"GET"},[h(r($),{label:"Warning",class:"p-button-warning"},{default:m(()=>[ze]),_:1})],8,xe)]))]))),128))])])])])]),_:1})}}},Ke=A(Ve,[["__scopeId","data-v-b6597a98"]]);export{Ke as default};
