import{r as W,z as j,A as E,J as p,o as r,c as n,a as f,b as i,u as o,d as e,g as c,e as _,k as m,B as N,h as w,K as U,M as D}from"./app.b53879ed.js";import{_ as $}from"./AdminLayout.ea59584d.js";import{a as H,_ as K}from"./PrimaryButton.27dfc493.js";import{s as M}from"./button.esm.3c05891c.js";import{s as h}from"./inputnumber.esm.05772400.js";import{_ as b}from"./InputError.78c0204c.js";import{s as T}from"./toast.esm.607cb02c.js";import"./ApplicationLogo.66d006a1.js";import"./inputtext.esm.b0b1c258.js";import"./portal.esm.e4d18dea.js";const u=s=>(U("data-v-b27eb3d0"),s=s(),D(),s),Z={class:"max-w-7xl mx-auto my-14 bg-white p-8 rounded-xl"},O={class:"flex justify-center mb-2 font-bold text-lg"},P={class:"flex justify-between mb-2"},A={key:0,class:"font-semibold"},G=w(" Ilo\u015B\u0107 dni urlopu: Nie podano "),J={key:1,class:"font-semibold"},R=["href"],q=w(" Urlopy "),L=["onSubmit"],Q={class:"mb-4 grid gap-3",style:{"grid-template-columns":"repeat(4, minmax(0, 1fr))"}},X={class:"flex flex-col"},Y=u(()=>e("label",{class:"mb-2 font-semibold"},"Ilo\u015B\u0107 godzin",-1)),ee={class:"flex flex-col"},oe=u(()=>e("label",{class:"mb-2 font-semibold"},"Stawka godzinowa",-1)),te={class:"flex flex-col"},se=u(()=>e("label",{class:"mb-2 font-semibold"},"Podatek",-1)),re={class:"flex flex-col"},ae=u(()=>e("label",{class:"mb-2 font-semibold"},"Koszt ca\u0142kowity",-1)),le={class:"justify-end"},de=w(" Zapisz "),ie={class:"block w-full overflow-x-auto mt-4"},ne={class:"items-center bg-transparent w-full border-collapse"},ce=u(()=>e("thead",null,[e("tr",null,[e("th",{class:"px-6 bg-blue-50 text-blue-500 align-middle border border-solid border-blue-100 py-3 border-l-0 border-r-0 whitespace-nowrap font-semibold text-center"}," Zarobek firmy "),e("th",{class:"px-6 bg-blue-50 text-blue-500 align-middle border border-solid border-blue-100 py-3 border-l-0 border-r-0 whitespace-nowrap font-semibold text-center"}," Zarobek firmy z uwzgl\u0119dnieniem urlopu "),e("th",{class:"px-6 bg-blue-50 text-blue-500 align-middle border border-solid border-blue-100 py-3 border-l-0 border-r-0 whitespace-nowrap font-semibold text-center"}," Roczny koszt urlopu "),e("th",{class:"px-6 bg-blue-50 text-blue-500 align-middle border border-solid border-blue-100 py-3 border-l-0 border-r-0 whitespace-nowrap font-semibold text-center"}," Miesi\u0119czny koszt urlopu ")])],-1)),ue={key:0},me=u(()=>e("td",{class:"border-t-0 px-6 border-l-0 border-r-0 whitespace-nowrap p-4 text-center text-lg font-semibold",colspan:4}," Brakuje niekt\xF3rych danych ",-1)),be=[me],pe={key:1},_e={class:"border-t-0 px-6 border-l-0 border-r-0 whitespace-nowrap p-4 text-center"},he={class:"border-t-0 px-6 border-l-0 border-r-0 whitespace-nowrap p-4 text-center"},xe={class:"border-t-0 px-6 border-l-0 border-r-0 whitespace-nowrap p-4 text-center"},ye={class:"border-t-0 px-6 border-l-0 border-r-0 whitespace-nowrap p-4 text-center"},fe={__name:"Index",props:{user:Object,holiday:Number,workerCost:Object},setup(s){var z,V,I,C;const l=s,x=W(!1),y=j(),t=E({hours:((z=l.workerCost)==null?void 0:z.hours)||0,wage:((V=l.workerCost)==null?void 0:V.hourly_wage)||0,tax:((I=l.workerCost)==null?void 0:I.tax)||0,cost:((C=l.workerCost)==null?void 0:C.total_cost)||0}),g=p(()=>(l.holiday*8*(t.cost/168)).toFixed(2)),k=p(()=>(g.value/12).toFixed(2)),v=p(()=>(t.hours*t.wage*((100-t.tax)/100)-t.cost).toFixed(2)),S=p(()=>(v.value-k.value).toFixed(2)),B=()=>{t.post(route("admin.user.cost.save",l.user),{onStart:()=>{x.value=!1,t.clearErrors(),l.holiday===0&&(y.add({severity:"error",summary:"B\u0142\u0105d",detail:"Uzupe\u0142nij ilo\u015B\u0107 urlop\xF3w, aby otrzymac wyniki",life:3e3}),t.cancel(),x.value=!0)},onSuccess:()=>{y.add({severity:"success",summary:"Powodzenie",detail:"Warto\u015Bci zapisane w bazie",life:3e3})},onError:F=>{y.add({severity:"error",summary:"B\u0142\u0105d",detail:"Wyst\u0105pi\u0142 b\u0142\u0105d",life:3e3})}})};return(F,a)=>(r(),n($,null,{default:f(()=>[i(o(T)),e("div",Z,[e("h1",O," Karta pracownika: "+c(s.user.name),1),e("div",P,[s.holiday===0?(r(),_("p",A,[G,x.value?(r(),n(b,{key:0,class:"mt-2",message:"Wyst\u0105pi\u0142 b\u0142\u0105d, ustaw ilo\u015B\u0107 dni urlopu"})):m("",!0)])):(r(),_("p",J," Ilo\u015B\u0107 dni urlopu: "+c(s.holiday),1)),e("p",null,[e("a",{class:"text-sm text-gray-700 dark:text-gray-500",href:F.route("admin.user.holiday.amount",s.user),as:"button",method:"GET"},[i(o(M),{label:"Help",class:"p-button-help"},{default:f(()=>[q]),_:1})],8,R)])]),e("form",{onSubmit:N(B,["prevent"])},[e("div",Q,[e("div",X,[Y,i(o(h),{mode:"decimal",maxFractionDigits:2,modelValue:o(t).hours,"onUpdate:modelValue":a[0]||(a[0]=d=>o(t).hours=d),placeholder:"Wpisz ilo\u015B\u0107 godzin"},null,8,["modelValue"]),o(t).errors?(r(),n(b,{key:0,class:"mt-2",message:o(t).errors.hours},null,8,["message"])):m("",!0)]),e("div",ee,[oe,i(o(h),{mode:"decimal",maxFractionDigits:2,modelValue:o(t).wage,"onUpdate:modelValue":a[1]||(a[1]=d=>o(t).wage=d),placeholder:"Wpisz stawk\u0119 godzinow\u0105"},null,8,["modelValue"]),o(t).errors?(r(),n(b,{key:0,class:"mt-2",message:o(t).errors.wage},null,8,["message"])):m("",!0)]),e("div",te,[se,i(o(h),{mode:"decimal",maxFractionDigits:2,modelValue:o(t).tax,"onUpdate:modelValue":a[2]||(a[2]=d=>o(t).tax=d),placeholder:"Wpisz ilo\u015B\u0107 podatku"},null,8,["modelValue"]),o(t).errors?(r(),n(b,{key:0,class:"mt-2",message:o(t).errors.tax},null,8,["message"])):m("",!0)]),e("div",re,[ae,i(o(h),{mode:"decimal",maxFractionDigits:2,modelValue:o(t).cost,"onUpdate:modelValue":a[3]||(a[3]=d=>o(t).cost=d),placeholder:"Wpisz koszt ca\u0142kowity"},null,8,["modelValue"]),o(t).errors?(r(),n(b,{key:0,class:"mt-2",message:o(t).errors.cost},null,8,["message"])):m("",!0)])]),e("div",le,[i(K,{disabled:o(t).processing},{default:f(()=>[de]),_:1},8,["disabled"])])],40,L),e("div",ie,[e("table",ne,[ce,e("tbody",null,[o(t).hours==0||o(t).cost==0||s.holiday===0?(r(),_("tr",ue,be)):(r(),_("tr",pe,[e("td",_e,c(o(v)),1),e("td",he,c(o(S)),1),e("td",xe,c(o(g)),1),e("td",ye,c(o(k)),1)]))])])])])]),_:1}))}},Be=H(fe,[["__scopeId","data-v-b27eb3d0"]]);export{Be as default};
